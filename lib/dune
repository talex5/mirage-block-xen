(library
 (name mirage_block_xen)
 (public_name mirage-block-xen)
 (modules Blkproto Device_number)
 (libraries cstruct io-page mirage-xen)
 (wrapped false)
 (preprocess
  (pps ppx_cstruct)))

(library
 (name mirage_block_xen_front)
 (public_name mirage-block-xen.front)
 (modules Blkfront Block)
 (libraries logs stringext lwt cstruct mirage-block-lwt io-page
   io-page-xen shared-memory-ring shared-memory-ring-lwt mirage-block-xen
   xen-evtchn mirage-xen)
 (wrapped false))

(library
 (name mirage_block_xen_back)
 (public_name mirage-block-xen.back)
 (modules Blkback Block_request)
 (libraries logs lwt cstruct io-page shared-memory-ring
   shared-memory-ring-lwt mirage-block-xen xen-evtchn xenstore
   xenstore.client mirage-block-lwt rresult mirage-xen)
 (wrapped false))
